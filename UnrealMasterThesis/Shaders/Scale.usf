#include "/Engine/Public/Platform.ush"

RWTexture2D<float4> input_rtt;
RWTexture2D<float4> output_rtt;
float scale;

[numthreads(N_THREADS_X, N_THREADS_Y, 1)]
void eWaveCompute(uint3 id : SV_DispatchThreadID) {
    float sign = -(2 * fmod(id.x + id.y, 2) - 1); // sign equals -1 if (id.x + id.y) % 2 == 1, otherwise 1
    float r = input_rtt[id.xy].r * scale;
    float g = input_rtt[id.xy].g * scale;
    output_rtt[id.xy] = float4(g, r * sign, 0.0, 1.0);
}