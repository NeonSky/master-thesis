#include "/Engine/Public/Platform.ush"

RWTexture2D<float4> InputOutputTexture;
float scale_r;
float scale_i;

[numthreads(N_THREADS_X, N_THREADS_Y, 1)]
void MainCompute(uint3 id : SV_DispatchThreadID) {

    float sign = -(2 * fmod(id.x + id.y, 2) - 1); // sign equals -1 if (id.x + id.y) % 2 == 1, otherwise 1

    float r = InputOutputTexture[id.xy].r;
    float g = InputOutputTexture[id.xy].g;

    // We do not divide by N^2 here since we would then have to later multiply by N^2 anyway.
    // See the report for further details.

<<<<<<< HEAD
    InputOutputTexture[id.xy] = float4(r, sign * g, 0.0, 1.0);
=======
    // InputOutputTexture[id.xy] = float4(3.0, 4.0, 0.0, 1.0);
    // InputOutputTexture[id.xy] = float4(r, sign * g, 0.0, 1.0);
    InputOutputTexture[id.xy] = float4(g, r, 0.0, 1.0);
>>>>>>> fix-fft-roundtrip
    //InputOutputTexture[id.xy] = float4(id.x, id.y, 0.0, 1.0);

}